"use strict";(self.webpackChunkaggregation_pipeline_workshop=self.webpackChunkaggregation_pipeline_workshop||[]).push([["2027"],{6722:function(e,n,i){i.r(n),i.d(n,{default:()=>p,frontMatter:()=>r,metadata:()=>t,assets:()=>a,toc:()=>c,contentTitle:()=>l});var t=JSON.parse('{"id":"simple-queries/writing-long-pipelines","title":"\uD83D\uDC50 \u7F16\u5199\u957F\u7BA1\u9053","description":"\u805A\u5408\u7BA1\u9053\u53EF\u80FD\u4F1A\u53D8\u5F97\u5F88\u957F\uFF0C\u8FD9\u53D6\u51B3\u4E8E\u6211\u4EEC\u9700\u8981\u8FD0\u884C\u591A\u5C11\u9636\u6BB5\u3002\u7F16\u5199\u7BA1\u9053\u5C31\u662F\u7F16\u5199\u4EE3\u7801\uFF0C\u56E0\u4E3A\u4F60\u5C06\u4F7F\u7528\u4F60\u81EA\u5DF1\u719F\u6089\u7684\u7F16\u7A0B\u8BED\u8A00\u4E2D\u7684 MongoDB \u9A71\u52A8\u7A0B\u5E8F\uFF08SDK\uFF09\u6765\u7F16\u5199\u5B83\u3002\u8FD9\u91CC\u6211\u4EEC\u4F7F\u7528\u9002\u7528\u4E8E MongoDB Shell mongosh \u7684 JavaScript \u793A\u4F8B\u3002\u4F46\u5982\u679C\u4F60\u5728\u7528 Rust \u7F16\u5199\u4E00\u4E2A\u5FAE\u670D\u52A1\uFF0C\u4F60\u80AF\u5B9A\u4F1A\u7528 Rust \u7F16\u5199\u4F60\u7684\u7BA1\u9053\uFF0C\u5176\u4ED6\u7F16\u7A0B\u8BED\u8A00\u540C\u7406\u3002","source":"@site/i18n/zh/docusaurus-plugin-content-docs/current/30-simple-queries/6-writing-long-pipelines.mdx","sourceDirName":"30-simple-queries","slug":"/simple-queries/writing-long-pipelines","permalink":"/aggregation-pipeline-lab/zh/docs/simple-queries/writing-long-pipelines","draft":false,"unlisted":false,"editUrl":"https://github.com/mongodb-developer/aggregation-pipeline-lab/blob/main/docs/30-simple-queries/6-writing-long-pipelines.mdx","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"\uD83D\uDC50 \u7EC4\u5408\u9636\u6BB5","permalink":"/aggregation-pipeline-lab/zh/docs/simple-queries/combining-them-all"},"next":{"title":"\uD83E\uDDB8\u200D\u2642\uFE0F \u91CD\u590D\u9636\u6BB5","permalink":"/aggregation-pipeline-lab/zh/docs/simple-queries/repeating-stages"}}'),s=i("5893"),o=i("65");let r={},l="\uD83D\uDC50 \u7F16\u5199\u957F\u7BA1\u9053",a={},c=[];function d(e){let n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",header:"header",p:"p",pre:"pre",...(0,o.a)(),...e.components},{Details:i}=n;return i||function(e,n){throw Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"-\u7F16\u5199\u957F\u7BA1\u9053",children:"\uD83D\uDC50 \u7F16\u5199\u957F\u7BA1\u9053"})}),"\n",(0,s.jsxs)(n.p,{children:["\u805A\u5408\u7BA1\u9053\u53EF\u80FD\u4F1A\u53D8\u5F97\u5F88\u957F\uFF0C\u8FD9\u53D6\u51B3\u4E8E\u6211\u4EEC\u9700\u8981\u8FD0\u884C\u591A\u5C11\u9636\u6BB5\u3002\u7F16\u5199\u7BA1\u9053\u5C31\u662F\u7F16\u5199\u4EE3\u7801\uFF0C\u56E0\u4E3A\u4F60\u5C06\u4F7F\u7528\u4F60\u81EA\u5DF1\u719F\u6089\u7684\u7F16\u7A0B\u8BED\u8A00\u4E2D\u7684 MongoDB \u9A71\u52A8\u7A0B\u5E8F\uFF08SDK\uFF09\u6765\u7F16\u5199\u5B83\u3002\u8FD9\u91CC\u6211\u4EEC\u4F7F\u7528\u9002\u7528\u4E8E MongoDB Shell ",(0,s.jsx)(n.a,{href:"https://www.mongodb.com/docs/mongodb-shell/",children:"mongosh"})," \u7684 JavaScript \u793A\u4F8B\u3002\u4F46\u5982\u679C\u4F60\u5728\u7528 Rust \u7F16\u5199\u4E00\u4E2A\u5FAE\u670D\u52A1\uFF0C\u4F60\u80AF\u5B9A\u4F1A\u7528 Rust \u7F16\u5199\u4F60\u7684\u7BA1\u9053\uFF0C\u5176\u4ED6\u7F16\u7A0B\u8BED\u8A00\u540C\u7406\u3002"]}),"\n",(0,s.jsx)(n.admonition,{type:"danger",children:(0,s.jsx)(n.p,{children:"\u4EE5\u4E0B\u8BED\u6CD5\u5728 Atlas UI \u805A\u5408\u7F16\u8F91\u5668\u4E2D\u4E0D\u80FD\u4F7F\u7528\u3002UI \u7F16\u8F91\u5668\u4E0D\u652F\u6301\u58F0\u660E\u53D8\u91CF\u3002"})}),"\n",(0,s.jsx)(n.p,{children:"\u8FD9\u5C31\u662F\u4E3A\u4EC0\u4E48\u6211\u4EEC\u5E94\u8BE5\u50CF\u8FD9\u6837\u91CD\u5199\u6211\u4EEC\u6700\u540E\u7684\u7BA1\u9053\uFF1A"}),"\n",(0,s.jsxs)(n.p,{children:["\u83B7\u53D6 1985 \u5E74\u6709 150 \u9875\u7684 15 \u672C\u4E66\u3002\u4EC5\u663E\u793A ",(0,s.jsx)(n.code,{children:"title"}),"\u3001",(0,s.jsx)(n.code,{children:"year"}),"\u3001",(0,s.jsx)(n.code,{children:"totalInventory"})," \u548C ",(0,s.jsx)(n.code,{children:"available"})," \u5B57\u6BB5\u3002 (\u793A\u4F8B\u6587\u6863 ",(0,s.jsx)(n.a,{href:"/docs/simple-queries/project",children:"\u8FD9\u91CC"}),")"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"db.books.aggregate([\n    {$match: {year: 1985, pages: 150}}, {$project: {_id: 0, title: 1, year: 1, totalInventory: 1, available: 1}}, {$limit: 15}\n])\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u5C06\u88AB\u66F4\u6539\u4E3A\uFF1A"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"let booksFrom1985With150pages = {$match: {year: 1985, pages: 150}};\nlet showOnlyTheseFields = {$project: {_id: 0, title: 1, year: 1, totalInventory: 1, available: 1}};\nlet getJust15books =  {$limit: 15};\n\ndb.books.aggregate([\n    booksFrom1985With150pages,\n    showOnlyTheseFields,\n    getJust15books,\n]);\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u66F4\u6539\u540E\u66F4\u5BB9\u6613\u9605\u8BFB\u548C\u7406\u89E3\uFF0C\u5BF9\u5427\uFF1F"}),"\n",(0,s.jsx)(n.p,{children:"\uD83D\uDC50 \u5C1D\u8BD5\u8FD0\u884C\u4E0A\u8FF0\u7BA1\u9053\u5E76\u6BD4\u8F83\u4F60\u7684\u7ED3\u679C\uFF1A\u5E94\u8BE5\u4E0E\u4E4B\u524D\u76F8\u540C"}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["\u60A8\u53EF\u4EE5\u50CF\u5728\u7F16\u7A0B\u8BED\u8A00\u4E2D\u7EC4\u5408\u51FD\u6570\u4E00\u6837\u7F16\u5199\u4F60\u7684\u805A\u5408\u7BA1\u9053\u3002\u805A\u5408 ",(0,s.jsx)(n.em,{children:"\u662F"})," \u670D\u52A1\u5668\u4E0A\u8FD0\u884C\u7684\u4EE3\u7801\u3002\u5728\u5BA2\u6237\u7AEF\u4F60\u53EA\u662F\u8868\u8FBE ",(0,s.jsx)(n.em,{children:"\u9700\u8981"})," \u505A\u4EC0\u4E48\uFF0C\u800C\u4E0D\u662F ",(0,s.jsx)(n.em,{children:"\u5982\u4F55"})," \u8FDB\u884C\u64CD\u4F5C\u3002"]})}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["\u7531\u4E8E\u8FD9\u662F\u4EE3\u7801\uFF0C\u6211\u4EEC\u751A\u81F3\u53EF\u4EE5\u5728\u7BA1\u9053\u4E2D\u6DFB\u52A0\u6CE8\u91CA\uFF08\u4EE5 ",(0,s.jsx)(n.code,{children:"//"})," \u5F00\u5934\uFF09"]})}),"\n",(0,s.jsxs)(n.p,{children:["\uD83D\uDC50 \u6211\u4EEC\u8FD8\u53EF\u4EE5\u4F7F\u7528 ",(0,s.jsx)(n.code,{children:"$gte"})," \u83B7\u53D6 150 \u9875\u6216\u66F4\u591A\u7684\u4E66\u3002\u68C0\u67E5 ",(0,s.jsx)(n.a,{href:"https://www.mongodb.com/docs/manual/reference/operator/query/gte/",children:"\u6587\u6863"})," \u4E2D\u7684 ",(0,s.jsx)(n.code,{children:"$gte"})," \u8BED\u6CD5\uFF0C\u5E76\u7F16\u5199\u4E00\u4E2A\u805A\u5408\u7BA1\u9053\u4EE5\u8FD4\u56DE 1985 \u5E74\u8D85\u8FC7 150 \u9875\u7684 15 \u672C\u4E66\u3002\u4EC5\u663E\u793A ",(0,s.jsx)(n.code,{children:"title"}),"\u3001",(0,s.jsx)(n.code,{children:"year"}),"\u3001",(0,s.jsx)(n.code,{children:"totalInventory"})," \u548C ",(0,s.jsx)(n.code,{children:"available"})," \u5B57\u6BB5\u3002 (\u793A\u4F8B\u6587\u6863 ",(0,s.jsx)(n.a,{href:"/docs/simple-queries/project",children:"\u8FD9\u91CC"}),")"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.em,{children:"\u63D0\u793A:"})," \u6211\u4EEC\u9700\u8981\u4F7F\u7528 ",(0,s.jsx)(n.code,{children:"$and"}),"\uFF0C\u56E0\u4E3A\u8FD9\u53EF\u80FD\u6709\u70B9\u590D\u6742\u3002"]}),"\n",(0,s.jsxs)(i,{children:[(0,s.jsx)("summary",{children:"\u7B54\u6848"}),(0,s.jsx)("div",{children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"let moreThan150pages =  {pages: {$gte: 150}}\nlet booksFrom1985WithMoreThan150pages = {$match: {$and: [{year: 1985}, moreThan150pages]}};\nlet showOnlyTheseFields = {$project: {_id: 0, title: 1, year: 1, totalInventory: 1, available: 1}};\nlet getJust15books =  {$limit: 15};\n\ndb.books.aggregate([\n    booksFrom1985WithMoreThan150pages,\n    showOnlyTheseFields,\n    getJust15books,\n]);\n"})})})]})]})}function p(e={}){let{wrapper:n}={...(0,o.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},65:function(e,n,i){i.d(n,{Z:function(){return l},a:function(){return r}});var t=i(7294);let s={},o=t.createContext(s);function r(e){let n=t.useContext(o);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);