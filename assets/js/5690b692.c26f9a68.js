"use strict";(self.webpackChunkaggregation_pipeline_workshop=self.webpackChunkaggregation_pipeline_workshop||[]).push([[616],{6348:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>g,frontMatter:()=>d,metadata:()=>r,toc:()=>l});var i=t(4848),s=t(8453);const d={},o="\ud83d\udc50 Adding New Fields to Results",r={id:"modifying-results/adding-fields",title:"\ud83d\udc50 Adding New Fields to Results",description:"$addFields",source:"@site/docs/80-modifying-results/adding-fields.mdx",sourceDirName:"80-modifying-results",slug:"/modifying-results/adding-fields",permalink:"/aggregation-pipeline-lab/docs/modifying-results/adding-fields",draft:!1,unlisted:!1,editUrl:"https://github.com/mongodb-developer/aggregation-pipeline-lab/blob/main/docs/80-modifying-results/adding-fields.mdx",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Modifying Results",permalink:"/aggregation-pipeline-lab/docs/category/modifying-results"},next:{title:"\ud83e\uddb8 Missing Data",permalink:"/aggregation-pipeline-lab/docs/modifying-results/missing-data"}},a={},l=[{value:"$addFields",id:"addfields",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",p:"p",pre:"pre",...(0,s.R)(),...e.components},{Details:t}=n;return t||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"-adding-new-fields-to-results",children:"\ud83d\udc50 Adding New Fields to Results"}),"\n",(0,i.jsx)(n.h2,{id:"addfields",children:"$addFields"}),"\n",(0,i.jsxs)(n.p,{children:["We want to estimate the reading time for a book. But we don't have that field stored in our data. We can use ",(0,i.jsx)(n.code,{children:"$addFields"})," for this. If the field exists, it'll get updated, and if it doesn't, it's added."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:'db.books.aggregate([\n    {$project: {\n        title: 1,\n        pages: 1,\n        }\n    },\n    {$addFields: {readingTimeHours: {$divide: [{$multiply: ["$pages", 2]}, 60]}}},\n])\n'})}),"\n",(0,i.jsxs)(n.p,{children:["\ud83d\udc50 Add a new field, ",(0,i.jsx)(n.code,{children:"notes"}),", that contains the text ",(0,i.jsx)(n.code,{children:"PLACEHOLDER"})," for all documents."]}),"\n",(0,i.jsxs)(t,{children:[(0,i.jsx)("summary",{children:"Answer"}),(0,i.jsx)("div",{children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:'db.books.aggregate([\n    {$project: {\n        title: 1,\n        pages: 1,\n        \n    }\n    \n    },\n\n    {$addFields: {notes: "PLACEHOLDER"}}\n])\n'})})})]})]})}function g(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>r});var i=t(6540);const s={},d=i.createContext(s);function o(e){const n=i.useContext(d);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),i.createElement(d.Provider,{value:n},e.children)}}}]);