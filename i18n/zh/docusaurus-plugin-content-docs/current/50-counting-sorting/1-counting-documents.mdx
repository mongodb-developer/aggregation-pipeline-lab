# ğŸ‘ $count

æˆ‘ä»¬å¦‚ä½•ç¡®å®šæ­¤ç®¡é“è¿”å›çš„æ­£å¥½æ˜¯15æœ¬ä¹¦ï¼Ÿ

```js
let moreThan150pages =  {pages: {$gte: 150}}
let booksFrom1985WithMoreThan150pages = {$match: {$and: [{year: 1985}, moreThan150pages]}};
let showOnlyTheseFields = {$project: {_id: 0, title: 1, year: 1, totalInventory: 1, available: 1}};
let getJust15books =  {$limit: 15};

db.books.aggregate([
    booksFrom1985WithMoreThan150pages,
    showOnlyTheseFields,
    getJust15books,
]);
```

è®¡æ•°ä¹¦ç±ï¼è®©æˆ‘ä»¬å‘ç®¡é“ä¸­æ·»åŠ ä¸€ä¸ªæ–°é˜¶æ®µæ¥è®¡æ•°è¿™äº›ä¹¦ç±ï¼š

```js
let moreThan150pages =  {pages: {$gte: 150}}
let booksFrom1985WithMoreThan150pages = {$match: {$and: [{year: 1985}, moreThan150pages]}};
let showOnlyTheseFields = {$project: {_id: 0, title: 1, year: 1, totalInventory: 1, available: 1}};
let getJust15books =  {$limit: 15};
let count = {$count: "totalBooks"}

db.books.aggregate([
    booksFrom1985WithMoreThan150pages,
    showOnlyTheseFields,
    getJust15books,
    count,
]);
```

åœ¨è¿™é‡Œï¼Œ`$count`å°†è®¡æ•°ç»“æœæ–‡æ¡£å¹¶è¿”å›ä¸€ä¸ªåªæœ‰ä¸€ä¸ªå­—æ®µçš„æ–‡æ¡£ï¼š`totalBooks`

```js
{
  totalBooks: 15
}
```

ğŸ‘ æˆ‘ä»¬çš„`authors`é›†åˆä¸­æœ‰å¤šå°‘ä½œè€…ï¼Ÿ

<details>
<summary>ç­”æ¡ˆ</summary>
<div>

```js
db.authors.aggregate([{$count: "authorCount"}])
```
</div>
</details>

## é˜¶æ®µçš„é¡ºåºå¾ˆé‡è¦

å¦‚æœæˆ‘ä»¬åœ¨`$match`é˜¶æ®µä¹‹åè¿›è¡Œè®¡æ•°ï¼Œæˆ‘ä»¬ä¼ é€’ç»™ä¸‹ä¸€æ­¥éª¤çš„æ–‡æ¡£åªåŒ…å«`totalBooks`å­—æ®µã€‚å› æ­¤ï¼Œ`$project`é˜¶æ®µå°†è¿”å›ä¸€ä¸ªç©ºæ–‡æ¡£ã€‚

```js
let moreThan150pages =  {pages: {$gte: 150}}
let booksFrom1985WithMoreThan150pages = {$match: {$and: [{year: 1985}, moreThan150pages]}};
let showOnlyTheseFields = {$project: {_id: 0, title: 1, year: 1, totalInventory: 1, available: 1}};
let getJust15books =  {$limit: 15};
let count = {$count: "totalBooks"}

db.books.aggregate([
    booksFrom1985WithMoreThan150pages,
    count,
    showOnlyTheseFields,
    getJust15books,
]);
```