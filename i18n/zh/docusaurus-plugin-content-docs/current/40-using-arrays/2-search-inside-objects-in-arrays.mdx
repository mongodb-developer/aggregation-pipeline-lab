# ğŸ‘ åœ¨æ•°ç»„ä¸­çš„å¯¹è±¡å†…æœç´¢

åœ¨æˆ‘ä»¬çš„ä¹¦ç±ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† [Attribute Pattern](https://www.mongodb.com/developer/products/mongodb/attribute-pattern/) æ¥åœ¨æ–‡æ¡£ä¸­æ‹¥æœ‰ä¸åŒçš„å±æ€§ã€‚æ­£å¦‚æˆ‘ä»¬åœ¨ [æ ·æœ¬æ–‡æ¡£](/docs/simple-queries/project) ä¸­çœ‹åˆ°çš„ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ª`attributes`æ•°ç»„ï¼ŒåŒ…å«å‡ ä¸ªå¯¹è±¡ï¼Œæ¯ä¸ªå¯¹è±¡å…·æœ‰ç›¸åŒçš„ç»“æ„ï¼š

```js
attributes: [
    {
      key: 'edition',
      value: '1st'
    },
    {
      key: 'dimensions',
      value: 'Height: 1.111 Inches, Length: 1.111 Inches, Weight: 0.2 Pounds, Width: 1.111 Inches'
    },
    {
      key: 'isbn13',
      value: '9780765342508'
    },
    {
      key: 'msrp',
      value: 6.99
    },
    {
      key: 'isbn',
      value: '0765342502'
    },
    {
      key: 'isbn10',
      value: '0765342502'
    }
  ],
```

æˆ‘ä»¬å¦‚ä½•æœç´¢æ‰€æœ‰å”®ä»·ä¸º9.99çš„ä¹¦ç±ï¼Ÿæˆ‘ä»¬æƒ³è¦åœ¨`attributes`ä¸­æœ‰ä¸€ä¸ªå¯¹è±¡ï¼Œå…¶é”®ä¸º`msrp`ä¸”å€¼ä¸º`9.99`çš„ä¹¦ç±ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹å¼å®ç°ï¼š

```js
db.books.aggregate([
    { $unwind : "$attributes" },
    {$match: {"attributes.key": "msrp", "attributes.value": 9.99} },
   {$project: {title: 1, attributes: 1}}
]);
```

åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä¸º`$attributes`æ•°ç»„ä¸­çš„æ¯ä¸ªå¯¹è±¡è·å–æ¯æœ¬ä¹¦çš„å‰¯æœ¬ã€‚è¿™å°†"å±•å¼€"æ•°ç»„å¹¶è¿”å›ç›¸åŒæ–‡æ¡£çš„å¤šä¸ªå‰¯æœ¬ï¼Œæ¯ä¸ªå‰¯æœ¬å…·æœ‰ä¸åŒçš„å±æ€§ï¼Œè¿™äº›å±æ€§å¯¹äºæ¯ä¸ªç”Ÿæˆçš„æ–‡æ¡£éƒ½æ˜¯ä¸åŒçš„ã€‚

ğŸ‘ ä¸ºäº†æ›´å¥½åœ°ç†è§£`$unwind`ï¼Œè¿è¡Œæ­¤èšåˆ

```js
db.books.aggregate([
  { $match: {_id: "0395623650"} },
  { $unwind : "$attributes" },
]);
```

ä½ åº”è¯¥ä¼šä¸ºåŸä¹¦çš„æ¯ä¸ªå±æ€§è·å–ä¸€ä¸ªæ–‡æ¡£ã€‚

ä½†ä½ å®é™…ä¸Šå¯ä»¥æ›´ç›´æ¥åœ°åŒ¹é…æ•°ç»„ä¸­çš„æ–‡æ¡£ï¼š

```js
let nineNinetyNine = {$match: {"attributes.key": "msrp", "attributes.value": 9.99}};
let showOnlyTheseFields = {$project: {_id: 0, title: 1, year: 1, totalInventory: 1, available: 1, "attributes": 1}};

db.books.aggregate([
    nineNinetyNine,
    showOnlyTheseFields,
]);
```