import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# ğŸ‘ $project

## åœ¨è¾“å‡ºä¸­åŒ…æ‹¬ç‰¹å®šå­—æ®µ

`books` é›†åˆä¸­çš„æ–‡æ¡£å¦‚ä¸‹æ‰€ç¤ºï¼š

```js
{
  _id: '0395623650',
  title: 'Platero y yo / Platero and I (Spanish-English Bilingual Edition) (English and Spanish Edition)',
  authors: [
    {
      _id: '64cc2db4830ba29148db5180',
      name: 'Juan RamÃ³n JimÃ©nez'
    }
  ],
  pages: 64,
  year: 1994,
  synopsis: 'Selections from a classic of world literature present a picture of life in the town of Moguer, in Andalusia, Spain.\n' +
    '\n' +
    '\n' +
    '                        Presents a picture of life in the town of Moguer, in Andalusia, Spain, as seen through the eyes of a wandering poet and his faithful donkey.\n',
  cover: 'https://images.isbndb.com/covers/36/57/9780395623657.jpg',
  attributes: [
    {
      key: 'edition',
      value: 'F First Edition Thus'
    },
    {
      key: 'dimensions',
      value: 'Height: 10.499979 Inches, Length: 6.999986 Inches, Weight: 2.0502990366 Pounds, Width: 0.12499975 Inches'
    },
    {
      key: 'isbn13',
      value: '9780395623657'
    },
    {
      key: 'msrp',
      value: 1.99
    },
    {
      key: 'isbn',
      value: '0395623650'
    },
    {
      key: 'isbn10',
      value: '0395623650'
    }
  ],
  totalInventory: 1,
  available: 1,
  binding: 'Hardcover',
  language: 'en',
  longTitle: 'Platero y yo / Platero and I (Spanish-English Bilingual Edition) (English and Spanish Edition)',
  publisher: 'Clarion Books'
}
```

å¦‚æœæˆ‘ä»¬åªå¯¹ä¹¦åæ„Ÿå…´è¶£ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `$project` é€‰æ‹©æˆ‘ä»¬æ„Ÿå…´è¶£çš„å­—æ®µã€‚ä¾‹å¦‚ï¼Œè¦åªè·å–ä¹¦åå’Œå¹´ä»½ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·å†™ï¼š

<Tabs groupId="project">
  <TabItem value="atlas" label="Atlas UI">
```js
[
  {
    $project: {title: 1, year: 1}
  }
]
```
  </TabItem>
  <TabItem value="mongodb-shell" label="MongoDB Shell">
```js
db.books.aggregate([{$project: {title: 1, year: 1}}])
```
  </TabItem>
</Tabs>

- 1 è¡¨ç¤ºâ€œæ˜¾ç¤ºè¯¥å­—æ®µâ€
- 0 è¡¨ç¤ºâ€œéšè—è¯¥å­—æ®µâ€
- ä¸»é”® `_id` å­—æ®µé»˜è®¤æ˜¾ç¤º

æ‰€ä»¥æˆ‘ä»¬å¯ä»¥æ’é™¤å­—æ®µï¼Œå¹¶æ˜¾ç¤ºé™¤ `attributes` ä¹‹å¤–çš„æ‰€æœ‰å­—æ®µï¼š

<Tabs groupId="aggregations">
  <TabItem value="atlas" label="Atlas UI">
```js
[
  {
    $project: {attributes: 0}
  }
]
```
  </TabItem>
  <TabItem value="mongodb-shell" label="MongoDB Shell">
```js
db.books.aggregate([{$project: {attributes: 0}}])
```
  </TabItem>
</Tabs>

ğŸ‘ ä»…æ˜¾ç¤º `title` å’Œ `cover`ã€‚

<details>
<summary>ç­”æ¡ˆ</summary>
<div>

<Tabs groupId="aggregations">
  <TabItem value="atlas" label="Atlas UI">
```js
[
  {
    $project: {title: 1, cover: 1}
  }
]
```
  </TabItem>
  <TabItem value="mongodb-shell" label="MongoDB Shell">
```js
db.books.aggregate([{$project: {title: 1, cover: 1}}])
```
  </TabItem>
</Tabs>
</div>
</details>

## æ’é™¤å­—æ®µ

ğŸ‘ ä»ç»“æœä¸­æ’é™¤ `cover`ã€`attributes` å’Œ `_id` å­—æ®µã€‚

<details>
<summary>ç­”æ¡ˆ</summary>
<div>

<Tabs groupId="aggregations">
  <TabItem value="atlas" label="Atlas UI">
```js
[
  {
    $project: {_id: 0, attributes: 0, cover: 0}
  }
]
```
  </TabItem>
  <TabItem value="mongodb-shell" label="MongoDB Shell">
```js
db.books.aggregate([{$project: {_id: 0, attributes: 0, cover: 0}}])
```
  </TabItem>
</Tabs>

</div>
</details>

## åŒ…æ‹¬å’Œæ’é™¤å­—æ®µ

:::danger

åœ¨åŒä¸€ä¸ª $project ä¸­ä¸èƒ½åŒæ—¶åŒ…æ‹¬å’Œæ’é™¤å­—æ®µï¼šå¦‚æœä½ å¼€å§‹åŒ…æ‹¬å­—æ®µï¼Œä½ å¿…é¡»ä¸€ç›´åŒ…æ‹¬å­—æ®µï¼Œåä¹‹äº¦ç„¶ã€‚

:::

ä¾‹å¦‚ï¼Œè¿™å°†å¤±è´¥ï¼š

```js
db.books.aggregate([{$project: {title: 1, attributes: 0}}])

MongoServerError: Invalid $project :: caused by :: Cannot do exclusion on field attributes in inclusion projection
```

:::info

è¿™ä¸ªè§„åˆ™çš„å”¯ä¸€ä¾‹å¤–æ˜¯ `_id` å­—æ®µï¼Œæˆ‘ä»¬å¯ä»¥åœ¨åŒ…æ‹¬å­—æ®µçš„ $project ä¸­æ’é™¤å®ƒã€‚

:::

```js
db.books.aggregate([{$project: {title: 1, _id: 0}}])
```